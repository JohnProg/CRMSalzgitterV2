<form #f="ngForm" flex (ngSubmit)="submitForm(form.value)">
  <md-card>

    <md-card-content>
      <br />
      <section layout-margin>
        <section layout-lt-sm="column" layout="row" flex="100">


          <md-select flex="40" placeholder="Select Family" [(ngModel)]="itemEdit.IdFamily" name="idfamily">
            <md-option *ngFor="let fam of families" [value]="fam.Id">
              {{fam.NameDescription}}
            </md-option>
          </md-select>
          <md-input-container flex="60">
            <input mdInput #name flex name="name" [(ngModel)]="itemEdit.Name" required placeholder="Name" maxlength="150" />
            <md-hint align="end">{{name.value.length}} / 150</md-hint>
          </md-input-container>
        </section>
        <section layout-lt-sm="column" layout="row" flex="100">
          <md-input-container flex>
            <input mdInput #description name="description" [(ngModel)]="itemEdit.Description" required placeholder="Description" maxlength="150">
            <md-hint align="end">{{description.value.length}} / 150</md-hint>
          </md-input-container>

        </section>

        <section layout-lt-sm="column" layout="row" flex>
          <td-expansion-panel label="Properties" flex (expanded)="expandProperties()">
            <section layout="row">
              <section flex="95"></section>
              <section flex="5">
                <button md-mini-fab class="md-mini md-primary" (click)="addProperty()" aria-label="Add Property" *ngIf="!isEditProp">
        <md-icon>add</md-icon>
      </button>

              </section>
            </section>
            <section flex *ngIf="!isEditProp">
              <td-data-table [data]="propList | async " [columns]="propColumns">
                <template tdDataTableTemplate="POrder" let-value="value" let-row="row" let-column="column">

                  <a md-list-item md-ripple class="block relative" [routerLink]="['../edit', row.Id]">

        {{value}}
      </a>

                </template>
      <template tdDataTableTemplate="tActions" let-value="value" let-row="row" let-column="column">
        <div layout="row" flex="5">
          
          <button md-icon-button (click)="deleteProperty(row)" >
            <md-icon>delete</md-icon>
          </button>
        </div>
      </template>

              </td-data-table>
            </section>

            <form #fprop="ngForm" flex (ngSubmit)="submitProperty(form.value)">
              <section flex layout="row">
                <section flex="25"></section>
                <section *ngIf="isEditProp" flex="50">
                  <section layout="column" flex="100" layout-margin>
                    <md-input-container>
                      <input mdInput type="number" #POrder flex name="POrder" [(ngModel)]="propEdit.POrder" required placeholder="Order" maxlength="150">
                    </md-input-container>

                    <md-select #IdProperty flex name="IdProperty" placeholder="Property" [(ngModel)]="propEdit.IdProperty">
                      <md-option *ngFor="let aprop of _props" [value]="aprop.Id">
                        {{ aprop.Name }}
                      </md-option>
                    </md-select>
                    <md-checkbox #IsRequired flex name="IsRequired" [(ngModel)]="propEdit.IsRequired">Required</md-checkbox>
                  </section>
                  <div layout="row" flex layout-align="end center">
                    <button md-button type="button" class="md-icon-button md-primary" (click)="cancelEditProp()" aria-label="Cancel">
                   <md-icon>highlight_off</md-icon>
                    </button>
                    <button md-button type="button" class="md-icon-button md-primary" (click)="saveProp(propEdit)" [disabled]="!fprop.valid" aria-label="Save Property">
                   <md-icon>save</md-icon>
          </button>

                  </div>
                </section>
                <section flex="25"></section>
              </section>
            </form>
          </td-expansion-panel>


        </section>
      </section>




      <a md-list-item md-ripple class="block relative" [routerLink]="'/options/products'">

        Products
      </a>
    </md-card-content>
  </md-card>
</form>